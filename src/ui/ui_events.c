// This file was generated by SquareLine Studio
// SquareLine Studio version: SquareLine Studio 1.5.0
// LVGL version: 8.3.11
// Project name: SquareLine_Project

#include "ui.h"
#include "hid_dev.h"

uint8_t strategemsAmount = 0;
lv_obj_t *buttons[4];

void deselectStratagem(lv_event_t *e)
{
	if (strategemsAmount > 0)
	{
		strategemsAmount--;
	}

	for (uint8_t c = 0; c < 4; c++)
	{
		if (buttons[c] == e->target)
		{
			buttons[c] = NULL;
		}
	}

	updateStratagemSelection();
}

void selectStratagem(lv_event_t *e)
{
	for (uint8_t c = 0; c < 4; c++)
	{
		if (buttons[c] == NULL)
		{
			buttons[c] = e->target;
			break;
		}
	}

	strategemsAmount++;

	updateStratagemSelection();
}

void updateStratagemSelection()
{
	lv_bar_set_value(uic_Amount, strategemsAmount, LV_ANIM_OFF);

	char textAmount = (char)(strategemsAmount + '0');
	lv_label_set_text(ui_Label1, &textAmount);

	if (strategemsAmount == 4)
	{
		for (uint8_t c = 0; c < 4; c++)
		{
			if (buttons[c] != NULL)
			{
				const lv_obj_t *button = buttons[c];
				const lv_img_dsc_t *bgImg = lv_obj_get_style_bg_img_src(button, LV_PART_MAIN | LV_STATE_DEFAULT);

				switch (c)
				{
				case 0:
					lv_obj_set_style_bg_img_src(ui_CustomStratagem1, bgImg, LV_PART_MAIN | LV_STATE_DEFAULT);
					break;
				case 1:
					lv_obj_set_style_bg_img_src(ui_CustomStratagem2, bgImg, LV_PART_MAIN | LV_STATE_DEFAULT);
					break;
				case 2:
					lv_obj_set_style_bg_img_src(ui_CustomStratagem3, bgImg, LV_PART_MAIN | LV_STATE_DEFAULT);
					break;
				case 3:
					lv_obj_set_style_bg_img_src(ui_CustomStratagem4, bgImg, LV_PART_MAIN | LV_STATE_DEFAULT);
					break;
				}
			}
		}

		_ui_screen_change(&ui_Game, LV_SCR_LOAD_ANIM_MOVE_LEFT, 1000, 100, &ui_Game_screen_init);
	}
}

void resetStratagems(lv_event_t *e)
{
	strategemsAmount = 0;

	for (uint8_t c = 0; c < 4; c++)
	{
		if (buttons[c] != NULL)
		{
			lv_obj_clear_state(buttons[c], LV_STATE_CHECKED);
			buttons[c] = NULL;
		}
	}

	updateStratagemSelection();
}

void triggerStratagem1(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_H,
						   HID_KEY_E,
						   HID_KEY_L,
						   HID_KEY_L,
						   HID_KEY_O,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}

void triggerStratagem2(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_UP_ARROW,
						   HID_KEY_DOWN_ARROW,
						   HID_KEY_RIGHT_ARROW,
						   HID_KEY_LEFT_ARROW,
						   HID_KEY_UP_ARROW,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}

void triggerStratagem3(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_UP_ARROW,
						   HID_KEY_DOWN_ARROW,
						   HID_KEY_RIGHT_ARROW,
						   HID_KEY_LEFT_ARROW,
						   HID_KEY_UP_ARROW,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}

void triggerStratagem4(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_UP_ARROW,
						   HID_KEY_DOWN_ARROW,
						   HID_KEY_RIGHT_ARROW,
						   HID_KEY_LEFT_ARROW,
						   HID_KEY_UP_ARROW,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}

void triggerStratagem5(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_H,
						   HID_KEY_E,
						   HID_KEY_L,
						   HID_KEY_L,
						   HID_KEY_O,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}

void triggerStratagem6(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_UP_ARROW,
						   HID_KEY_DOWN_ARROW,
						   HID_KEY_RIGHT_ARROW,
						   HID_KEY_LEFT_ARROW,
						   HID_KEY_UP_ARROW,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}

void triggerStratagem7(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_UP_ARROW,
						   HID_KEY_DOWN_ARROW,
						   HID_KEY_RIGHT_ARROW,
						   HID_KEY_LEFT_ARROW,
						   HID_KEY_UP_ARROW,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}

void triggerStratagem8(lv_event_t *e)
{
	uint8_t sequence[8] = {HID_KEY_UP_ARROW,
						   HID_KEY_DOWN_ARROW,
						   HID_KEY_RIGHT_ARROW,
						   HID_KEY_LEFT_ARROW,
						   HID_KEY_UP_ARROW,
						   0,
						   0,
						   0};

	setStratagemCode(sequence);
}